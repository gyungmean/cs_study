# 로드밸런싱

## 대규모 트래픽 대응 방안
웹 사이트에 접속하는 인원이 급증한다면 모든 트래픽을 감당하기에는 서버 1대로는 부족함

### Scale Up
- 서버 하드웨어 자체의 성능을 올림
- 하드웨어 성능 향상 비용이 많이 든다.
- 업그레이드 과정에서 서비스가 중단되어야함

### Scale Out
- 여러 대의 서버로 나눠서 일함
- 중간에 서비스가 중단되지 않으면서 트래픽 관리 가능
- 여러 대의 서버에 균등하게 트래픽을 분산 시키는 것이 **`로드밸런싱`** 이다.
  
## 로드밸런싱이란?
### 개념
- 클라이언트 간, 서버-클라이언트 간 인터넷 트래픽을 지시하고 제어한다.
- 애플리케이션 지원하는 리소스 풀 전체에 네트워크 트래픽 균등하게 배포
- 로드 밸런서는 클라이언트와 서버 그룹 사이에 위치
  
### 이점
- 애플리케이션 가용성
  - 로드밸런서가 서버 문제 자동 감지, 클라이언트 트래픽을 사용 가능한 서버로 리디렉션
  - 애플리케이션 가동 중지 없이 서버 유지 및 관리, 업그레이드 실행
  - 자동으로 재해 복구 제공
- 확장성
  - 트래픽 병목 현상 방지
  - 필요에 따라 다른 서버 추가, 제거 => 애플리케이션 트래픽 예측
- 보안
  - 로드밸런서에 보안 기능 내장
  - 공격 트래픽의 영향 최소화
- 성능
  - 응답 시간 늘리고 네트워크 지연시간을 줄여 애플리케이션 성능 향상
  - 클라이언트 요청을 지리적으로 더 가까운 서버로 리디렉션 하여 지연 시간 단축

## 로드밸런싱 알고리즘
### 정적 로드밸런싱
> 고정된 규칙을 따름, 현재 서버 상태와 무관
- **라운드 로빈 방식**
  - 클라이언트로부터 받은 요청을 로드밸럴런싱 대상 서버에 순서대로 할당
- **가중 기반 라운드 로빈 방식**
  - 우선순위 또는 용량에 따라 각 서버에 다른 가중치 할당
- **IP 해시 방식**
  - 클라이언트 ip주소에 해싱
  - 클라이언트 ip주소를 숫자로 변환하여 개별 서버에 매핑

### 동적 로드밸런싱
> 트래픽 배포 전 서버 현재 상태 검사
- **최소 연결 방법**
  - 로드밸런서가 활성 연결이 가장 적은 서버를 확인 후 해당 서버로 트래픽 전송
- **가중치 기반 최소 연결 방법**
  - 일부 서버가 다른 서버보다 더 많은 활성 연결을 처리 할 수 있따고 가정
  - 각 서버에 다른 가중치나 용량 할당하여 로드 밸런서는 용량별 연결이 가장 적은 서버로 클라이언트 요청을 전송한다.
- **최소 응답 시간 방법**
  - 서버에 들어오는 요청을 처리하고 응답을 전송할 때까지 시간을 고려하여 최상의 서버를 고름
- **리소스 기반 방법**
  - 로드밸런서가 현재 서버 부하 분석하여 트래픽을 배포한다.
  - 서버 실행 컴퓨터 용량 및 메모리 등 리소스 사용량을 계산

## 로드밸런싱 종류
- OSI 7계층에 따라 나뉨
![Untitled](https://github.com/gyungmean/cs_study/assets/70059000/d1bc91c1-883a-4075-9a44-bf7baa862cde)
![Untitled (1)](https://github.com/gyungmean/cs_study/assets/70059000/c7c45497-847f-47fb-8eb9-f6bcda8b7473)

---
# :pencil: 퀴즈
> 대표적인 로드밸런싱 알고리즘 3개를 쓰고 특징을 간단하게 적으세요